"use strict";(self["webpackChunkflower_shop"]=self["webpackChunkflower_shop"]||[]).push([[98],{1590:function(t,e,i){i.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[t._t("topSlot"),e("div",[e("div",{staticClass:"goods-item-main"},[e("div",{staticClass:"goods-item-img"},[t._t("imgSlot")],2),e("div",{staticClass:"goods-item-content"},[e("div",{staticClass:"goods-item-title"},[t._t("nameSlot")],2),e("div",{staticClass:"goods-item-attribute"},[t._t("attributeSlot")],2)])])]),t._t("menuSlot")],2)},r=[],a={name:"goodsItem",data(){return{}},methods:{},mounted(){}},n=a,o=i(1001),l=(0,o.Z)(n,s,r,!1,null,"1f769a80",null),d=l.exports},6987:function(t,e,i){i.r(e),i.d(e,{default:function(){return v}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"root"},[e("action-bar",{attrs:{title:"订单管理",left:!1,border:!1}}),e("div",{staticClass:"type-root"},[e("div",{staticClass:"order-type"},t._l(t.orderType,(function(i,s){return e("div",{key:s,staticClass:"order-type-child",on:{click:function(e){return t.bindSwtichOrderType(i.type,s)}}},[e("div",{class:["order-type-ab",t.orderType.length>1?"order-type-ab-center":""]},[e("div",{class:t.typeCurrent==s?"ar":""},[e("div",{class:t.typeCurrent==s?"type-active-left":""})]),e("div",{class:[t.typeCurrent==s?"type-active":"",t.orderType.length<3?"type-active-padding":""]},[t._v(" "+t._s(i.name))]),e("div",{class:t.typeCurrent==s?"ar":""},[e("div",{class:t.typeCurrent==s?"type-active-right":""})])])])})),0),e("div",{staticClass:"order-screen",on:{click:t.bindScreen}},[e("div",[t._v("筛选")]),e("div",{staticClass:"triangle"})])]),e("div",{staticClass:"container"},[e("div",{staticClass:"content"},[e("van-tabs",{staticClass:"tabs",attrs:{background:"#f2f2f2",ellipsis:!1,animated:"",swipeable:"",color:"#42D18A"},on:{change:t.swiperTab},model:{value:t.orderStateCurrent,callback:function(e){t.orderStateCurrent=e},expression:"orderStateCurrent"}},t._l(t.orderTypeData[t.typeCurrent].tablist,(function(i,s){return e("van-tab",{key:i.title,attrs:{title:i.title}},[e("scroll-view",{ref:`scroll${s}`,refInFor:!0,attrs:{refresher:"",loadmore:"",data:t.orderList,noMoreData:t.noMoreData},on:{pullrefresh:t.onRefresh,scrolltolower:t.onLoadMore}},[e("div",{staticClass:"sc-top"}),t._l(t.orderList,(function(i,s){return e("div",{key:i.orderId,staticClass:"card"},[""!=t.type?e("div",{staticClass:"order-item"},[e("div",{staticClass:"goods-top"},[e("div",[t._v(t._s(i.phone))]),e("div",[t._v(t._s(i.state))])]),t._l(i.orderItems,(function(i,s){return e("goods-item",{key:s},[e("van-image",{staticClass:"goods-img",attrs:{slot:"imgSlot",radius:".25rem",src:t.baseUrl+i.imageUrl},slot:"imgSlot"}),e("div",{staticClass:"goods-name",attrs:{slot:"nameSlot"},slot:"nameSlot"},[t._v(t._s(i.productName))]),e("div",{attrs:{slot:"attributeSlot"},slot:"attributeSlot"},[e("div",{staticClass:"attribute"},[e("div"),e("div",{staticClass:"attribute-content"},[t._v("x"+t._s(i.count))])]),e("div",{staticClass:"attribute"},[e("div",{staticClass:"attribute-content"},[t._v("颜色:"+t._s(i.color)+" 级别:"+t._s(i.level)+" 规格:"+t._s(i.unit)+" ")]),e("div",[t._v("¥ "+t._s(i.unitPrice))])])])],1)})),e("div",{staticClass:"item-price"},[e("div",{staticClass:"item-price-content"},[e("span",{staticClass:"item-price-money"},[t._v("优惠金额")]),e("span",[t._v("¥ "+t._s(i.raisePriceAll))])]),e("div",{staticClass:"item-divider"}),e("div",{staticClass:"item-price-content"},[e("span",{staticClass:"item-price-money"},[t._v("实付")]),e("span",[t._v("¥ "+t._s(i.consumePrice))])])]),e("div",{staticClass:"item-other"},[e("div",{staticClass:"item-news"},[e("span",{staticClass:"item-traffic"},[t._v("订单备注")]),e("span",{staticClass:"item-traffic-remark"},[t._v(t._s(i.remark))])]),e("div",{staticClass:"item-news"},[e("span",{staticClass:"item-traffic"},[t._v("配送方式")]),t._v(t._s(i.typeOfTraffic)+" ")]),e("div",{staticClass:"item-news"},[e("span",{staticClass:"item-traffic"},[t._v("订单编号")]),t._v(t._s(i.alias)+" ")]),e("div",{staticClass:"item-bottom"},[e("span",{staticClass:"item-traffic"},[t._v("下单时间")]),t._v(t._s(i.createDateTime)+" ")]),i.distributionBtn&&""!=i.distributionBtn?e("div",{class:["item-dis-position","item-prepare","0"==i.distributionState?"prepared":"not-prepare"],on:{click:function(e){return t.bindPrepare(s)}}},[t._v(" "+t._s("0"==i.distributionState?"备货":"备货中")+" ")]):t._e(),"1"==i.distributionState?e("span",{staticClass:"item-prepared"},[t._v("备货中")]):t._e()])],2):t._e()])}))],2)],1)})),1)],1)])],1)},r=[],a=(i(446),i(7847)),n=(i(5762),i(5094)),o=(i(7658),i(5928)),l=i(1590),d=i(4824),c={name:"order",components:{[n.Z.name]:n.Z,[a.Z.name]:a.Z,goodsItem:l.Z,ScrollView:d.Z},data(){return{orderType:[{name:"现货订单",type:"普通"},{name:"预售订单",type:"预定"},{name:"维权订单",type:""}],typeCurrent:0,orderTypeData:[{tablist:[{title:"全部",value:"全部"},{title:"未支付",value:"未支付"},{title:"未发货",value:"未发货"},{title:"已发货",value:"已发货"},{title:"已完成",value:"已完成"},{title:"已取消",value:"已取消"}]},{tablist:[{title:"全部",value:"全部"},{title:"未支付",value:"未支付"},{title:"未发货",value:"未发货"},{title:"已发货",value:"已发货"},{title:"已完成",value:"已完成"},{title:"已取消",value:"已取消"}]},{tablist:[{title:"全部",value:"全部"},{title:"待处理售后",value:"待处理售后"},{title:"同意售后",value:"确认售后"},{title:"售后申诉",value:"申诉"}]}],orderStateCurrent:0,orderList:[],noMoreData:!1,isReset:!0,state:"全部",type:"",date:"",goodsStockNo:"",orderAlias:"",typeOfTraffic:"",rId:"",start:0,limit:10,showOperation:!1}},beforeRouteEnter(t,e,i){i();const s=e.params.orderScreen;s&&i((t=>{t.goodsStockNo=s.goodsStockNo,t.orderAlias=s.orderAlias,t.typeOfTraffic=s.typeOfTraffic,t.rId=s.rId,t.start=0,t.isReset=!0,t.requestList()}))},methods:{bindScreen(){this.$router.push("/orderScreen")},onLoadMore(){if(this.noMoreData)return;const t=this.start+this.limit;this.start=t,this.requestList()},onRefresh(){this.isReset=!0,this.start=0,this.requestList()},bindPrepare(t){const e=this.orderList,i=e[t];let s=i.distributionState;s="1"===s||1===s?"0":"1",(0,o.tb)({state:s,orderId:i.orderId}).then((t=>{console.log(t.data.state),void 0!==t.data.state&&(i.distributionState=t.data.state,i.distributionBtn=t.data.distributionBtn,this.orderList=e)})).catch((t=>{this.$toast(t.msg)}))},bindSwtichOrderType(t,e){this.typeCurrent=e,this.orderStateCurrent=0,this.type=t,this.start=0,this.orderList=[],this.isReset=!0,this.requestList()},requestList(){this.type,this.getOrderList()},getOrderList(){const t={state:this.state,type:this.type,date:this.date,goodsStockNo:this.goodsStockNo,orderAlias:this.orderAlias,typeOfTraffic:this.typeOfTraffic,rId:this.rId,start:this.start,limit:this.limit};(0,o.$F)(t).then((t=>{this.scrollFinally(),this.pushListData(t.data.orderList)})).catch((t=>{this.scrollFinally(),this.$toast(t.msg)}))},scrollFinally(){const t=this.$refs[`scroll${this.orderStateCurrent}`][0];t.refreshed(),t.loaded()},pushListData(t){let e=!1;t.length<10&&(e=!0);let i=this.orderList;null==i||!0===this.isReset?i=t:i.push(...t),this.orderList=i,this.noMoreData=e,this.isReset=!1},swiperTab(t){const e=this.orderTypeData[this.typeCurrent].tablist[t].value;this.state=e,this.orderStateCurrent=t,this.start=0,this.orderList=[],this.isReset=!0,this.requestList()}},mounted(){this.type=this.orderType.length>0?this.orderType[this.typeCurrent].type:"",this.requestList()}},u=c,h=i(1001),p=(0,h.Z)(u,s,r,!1,null,"44fcfbc8",null),v=p.exports},9435:function(t,e,i){i.d(e,{j:function(){return a},G:function(){return n}});i(7658);function s(t){var e=[];function i(t){t.forEach((function(t){e.push(t),t.componentInstance&&i(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&i(t.children)}))}return i(t),e}function r(t,e){var i=e.$vnode.componentOptions;if(i&&i.children){var r=s(i.children);t.sort((function(t,e){return r.indexOf(t.$vnode)-r.indexOf(e.$vnode)}))}}function a(t,e){var i,s;void 0===e&&(e={});var a=e.indexKey||"index";return{inject:(i={},i[t]={default:null},i),computed:(s={parent:function(){return this.disableBindRelation?null:this[t]}},s[a]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},s),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);r(t,this.parent),this.parent.children=t}}}}}function n(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}}}]);
//# sourceMappingURL=98.9984292d.js.map